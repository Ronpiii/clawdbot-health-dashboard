# 2026-01-29

## nightly build: arc todo
- built TODO aggregator: scans all .md files for `- [ ]` items
- 139 open TODOs found across 15 files
- supports: full list, count, keyword filter, done, all (with progress bar)
- files: `scripts/todo.mjs`, updated `scripts/arc`
- posted summary to discord #logs

## morning tinkering
- **arc triage** — TODO categorization tool
  - classifies 146 TODOs: 41 actionable, 5 blocked, 94 documentation noise, 6 stale
  - 64% of "TODOs" are just doc checklists, not real tasks
  - helps focus on what actually matters
- **tasks/active.md cleanup** — removed completed items, surfaced business tasks:
  - TMW meeting prep, ventok outreach
  - separated blocked vs backlog properly

## anivia restructure
- **nav consolidation**: 8 sidebar items → 4 + settings behind user avatar
  - dashboard (with overview/approvals/activity tabs), pipeline, leads, sequences
  - AI settings moved into settings page as tab
  - lazy-loaded tab content
- **build fixes**: added missing popover component, fixed CSV export type error
- **safety audit**: applied distributed systems research
  - **CRITICAL FIX**: double-approve race condition in approval flow
    - approveAction() now uses optimistic locking: `.eq('status', 'pending')` on update
    - prevents two concurrent callers from both sending the same email
  - auth audit: 12 write operations missing explicit auth checks (rely on RLS — acceptable but not ideal)
  - built full test suite: `tests/safety-audit.ts` (RLS, approval integrity, race conditions, auth, data integrity)
  - inspired by Yuan et al. OSDI 2014 paper + FoundationDB simulation testing
