# 2026-02-02

## nightly build (00:00 UTC)

### arc blockers — unified blocker dashboard
- `scripts/blockers.mjs` — scans all markdown for blocked/waiting/missing items
- groups by project, severity-ranked (critical > high > medium)
- smart filtering: skips prose dirs (writing/, research/, marketing/), instruction files
- boosts tasks/active.md items since those are explicitly tracked
- flags: `--short`, `--json`, `<project>` filter
- registered as `arc blockers` in CLI
- current state: 9 blockers, top critical = vercel pro upgrade
- posted to discord #logs

## morning standup (06:00 UTC)
- morning.mjs hung on wttr.in fetch (timeout) — posted briefing manually via discord webhook
- yesterday recap: anivia phase 3 complete, lead gen rebuild, IMAP polling, MCP server, landing page redesign
- top blockers: vercel pro, stripe keys, moltbook API down

## anivia polish sprint (09:40 UTC)
- 5 parallel sub-agents: TS fix, MCP polish, email backfill, arc blockers cmd, log compression
- all completed successfully

## new habit: daily reddit pulse
- ron requested daily morning reddit scan on relevant topics
- added to HEARTBEAT.md morning ritual
- subreddits: r/sales, r/coldoutreach, r/SaaS, r/smallbusiness, r/Emailmarketing, r/EntrepreneurRideAlong
- daily notes saved to memory/reddit/YYYY-MM-DD.md
- purpose: competitive intel, ideas, staying in the loop on what users actually want

## reddit sales research (10:15 UTC)
- full report: projects/ventok/products/reddit-sales-research.md
- 20+ threads, 8 sections: tools ranked, pain points, wishlists, pricing, deliverability, AI sentiment, opportunities, quotes
- key insight: tool fragmentation is #1 pain, anivia's positioning validated
- infrastructure automation deferred (too complex for now)

## post-contact workflow (10:49-11:20 UTC)
- migration 022 run live in supabase
- built: task manager, reply composer, deal outcome, send-reply API, backfill script
- pushed to github (commit a864600), vercel auto-deploying
- sub-agent files didn't persist — had to rebuild manually (lesson logged)

## sub-agent investigation (11:14 UTC)
- root cause found: sessions_spawn creates sessions but tools aren't bound
- model receives system prompt describing tools, generates text-formatted `<tool_call>` XML
- then hallucinates `<tool_result>` responses — never actually executes anything
- every sub-agent session: exactly 1 user msg + 1 assistant msg (no tool turns)
- config is correct: `tools.subagents.tools.allow: ["all"]`
- confirmed with live test: wrote file via sub-agent, file doesn't exist on disk
- likely clawdbot bug — current v2026.1.23-1, latest v2026.1.24-3
- **workaround**: don't use sessions_spawn for file-writing tasks, do in main session
- **fix**: update clawdbot and retest

## skred messenger
- ron asked about security vs telegram
- P2P, no phone/email/ID required, e2e encrypted, no intermediate servers
- more secure than telegram for 1-on-1. tradeoff: no multi-device, no API/bots
- ron considering for personal use

## anivia sprint (13:35-14:42 UTC)

### bug fixes
- ai tips route: typed defaults array to fix Record<string,string> TS error
- weekly digest: moved computed email rates into object literal (TS property assignment)
- landing page: force-light class to override dark theme (CSS var re-declaration)
- avatar upload: created supabase `public` storage bucket, switched to admin client for upload
- settings merge bug: updateOrganization was overwriting entire settings JSON, now merges
- avatar propagation: sidebar + team list now fetch and display avatar_url

### features built
- **AI sequence generation** — POST /api/ai/generate-sequence, analyzes org context, creates optimal steps
- **separate Generate vs Create modals** for sequences (mode prop)
- **editable company profile** — org description field, voice/tone in Sales Profile tab
- **campaigns (full feature)**:
  - migration 024: campaigns + campaign_sequences tables
  - /campaigns list page: compact table rows (not cards), inline metrics
  - /campaigns/[id] detail: two-column workspace layout
    - left: sequences panel with stats
    - right: tabbed Enrolled Leads table + Activity feed
  - AI campaign generation: creates campaign + sequences + links
  - CRUD: create, update status, delete, add/remove sequences

### design changes
- removed zap icons across the app (sequences, sidebar, command palette, approval)
- replaced with Layers (sidebar), CheckCheck (approval), or removed entirely
- template cards: text descriptions instead of icon chains
- chatbox tips: skeleton loading instead of non-functional fallback tips
- campaigns page visually distinct from sequences (table vs cards, dashboard detail)

### ron preferences noted
- hates template/generic icons — wants custom or none
- prefers minimal, clean UI over icon-heavy
- wants AI generation as first-class feature (sequences + campaigns)
- likes workspace/dashboard feel for detail pages

## autonomous work while ron is away (14:46-15:10 UTC)

### ops fixes
- generated CRON_SECRET, added to .env.local
- updated vercel.json cron schedules: sequences every 15min, auto-enroll every 4h, replies every 30min
- backfilled IMAP settings for Ronald@ventok.eu → imap.zone.eu:993
- ron still needs to: add CRON_SECRET to vercel env vars, upgrade to vercel pro for sub-daily crons

### pipeline stage editor
- new Pipeline tab in settings
- full CRUD: add, rename, reorder (up/down arrows), delete, color picker, won/lost flags
- safety: can't delete stages with leads assigned
- all onboarding data now editable post-setup (company, ICP, products, voice, pipeline)

### unsubscribe/opt-out handling
- unsubscribe footer automatically added to all outgoing emails
- /unsubscribe page — clean landing with confirmation
- POST /api/unsubscribe — marks lead unsubscribed_at, pauses all active enrollments
- sequence executor now skips unsubscribed leads (auto-pauses enrollment)
- migration 025: unsubscribed_at column on leads table

### remaining for ron
- run migration 025 SQL in supabase
- add CRON_SECRET to vercel environment variables
- upgrade vercel to pro ($20/mo) for frequent crons
- stripe keys for billing
- custom domain

## anivia afternoon session with ron (17:30-21:30 UTC)

### UI/UX improvements
- loading spinners → progress bars (dashboard, settings, modals)
- sequence builder wizard modal (replaces step-by-step editing)
- leads page: stage dropdown → horizontal tabs
- campaign edit option in dropdown menu
- removed thumbs up from lead detail (keep thumbs down for disqualify)
- company size: single select → multi-select checkboxes
- user-friendly error for duplicate sequence enrollment

### lead generation overhaul
- **Estonian Business Registry integration** (new)
  - official ariregister.rik.ee API (free)
  - searches by EMTAK codes (manufacturing = 10-33)
  - gets board member names as contacts
  - primary source for Estonian searches
- **Apollo improvements**: multi-page fetch, industry tags, broader fallback
- **TLD filtering**: rejects wrong-country domains (.fi when searching Estonia)
- **light enrichment**: now scrapes homepage for emails + tries multiple prefixes

### email scheduling feature (new)
- clock button in approval queue (between reject/approve)
- keyboard shortcut: S
- schedules for 8:00 Tallinn time
- cron at 6:00 UTC sends scheduled emails
- migration 027: scheduled_for column + scheduled status
- migration blocked: existing data has 'completed' and 'pendign' statuses

### bug fixes
- campaigns/getAvailableSequences: was querying non-existent enrolled_count column
- step editor generate: no longer overwrites user-written instructions

### pending for ron
- run migration 027 after cleaning up status values:
  - `UPDATE ai_actions SET status = 'pending' WHERE status = 'pendign'`
  - `UPDATE ai_actions SET status = 'executed' WHERE status = 'completed'`
